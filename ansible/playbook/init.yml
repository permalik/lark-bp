---
- name: Init System
  hosts: local
  connection: local

  vars:
    project_dir: "{{ lookup('env', 'PROJECT_DIR') }}"
    repos:
      - path: "{{ project_dir }}lark-api"
        name: lark-api
        repo: git@github.com:permalik/lark-api.git
      - path: "{{ project_dir }}lark-bus"
        name: lark-bus
        repo: git@github.com:permalik/lark-bus.git
      - path: "{{ project_dir }}lark-llm"
        name: lark-llm
        repo: git@github.com:permalik/lark-llm.git
      - path: "{{ project_dir }}lark-orc"
        name: lark-orc
        repo: git@github.com:permalik/lark-orc.git
      - path: "{{ project_dir }}lark-pipe"
        name: lark-pipe
        repo: git@github.com:permalik/lark-pipe.git
      - path: "{{ project_dir }}lark-side"
        name: lark-side
        repo: git@github.com:permalik/lark-side.git
      - path: "{{ project_dir }}lark-web"
        name: lark-web
        repo: git@github.com:permalik/lark-web.git

  tasks:
    - name: Process each repository
      ansible.builtin.include_tasks: init_clone.yml
      loop: "{{ repos }}"
      loop_control:
        loop_var: repo

